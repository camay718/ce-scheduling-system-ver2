# æ¥­å‹™é…ç½®èª¿æ•´ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼ˆå€‹äººã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³è¡¨ç¤ºæ”¹å–„ãƒ»PDFé€±é–“ä¸€æ‹¬å‡ºåŠ›å¯¾å¿œç‰ˆï¼‰

## **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦**

ç¾åœ¨ã®å„ªç§€ãªã‚·ã‚¹ãƒ†ãƒ ï¼ˆhttps://hkwpxjas.gensparkspace.com/ï¼‰ã«ãŠã„ã¦ã€ä»¥ä¸‹ã®**2ã¤ã®é‡è¦ãªæ”¹å–„é …ç›®**ã‚’å®Ÿè£…ã—ã€çœŸã®å®Œæˆç‰ˆã‚’æ§‹ç¯‰ã—ã¾ã™ï¼š

**ğŸ¯ æ”¹å–„é …ç›®ï¼š**
1. **å€‹äººã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³è¡¨ç¤ºã®æ”¹å–„**ï¼ˆæ™‚é–“åŒºåˆ‡ã‚Šã‚»ãƒ«ã‹ã‚‰ãƒãƒ¼å½¢çŠ¶è¡¨ç¤ºã¸ã®å¤‰æ›´ã€é‡è¤‡æ™‚ã®æ®µè¡¨ç¤ºï¼‰
2. **PDFå‡ºåŠ›æ©Ÿèƒ½ã®ä¿®æ­£**ï¼ˆæœˆã€œé‡‘å…¨ä½“ã®é€±é–“ä¸€æ‹¬å‡ºåŠ›å¯¾å¿œï¼‰

**âœ… çµ¶å¯¾ã«ç¶­æŒã™ã¹ãæ—¢å­˜æ©Ÿèƒ½ï¼š**
- 27åã®æ­£ç¢ºãªã‚¹ã‚¿ãƒƒãƒ•ãƒ‡ãƒ¼ã‚¿
- ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç”»é¢ã®å…¨æ©Ÿèƒ½ï¼ˆã‚¹ã‚¿ãƒƒãƒ•ãƒ—ãƒ¼ãƒ«ã€æ¥­å‹™è¿½åŠ ãƒ»ç·¨é›†ã€ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ï¼‰
- å½“ç›´ãƒ»éç•ªè¨­å®šæ©Ÿèƒ½ï¼ˆã‚¿ãƒ–ä»˜ãUIï¼‰
- HDåŒºåˆ†ãƒ”ãƒ³ã‚¯ï¼ˆ#FF69B4ï¼‰ãƒ»FLEXåŒºåˆ†ã‚´ãƒ¼ãƒ«ãƒ‰ï¼ˆ#FFD700ï¼‰è‰²åˆ†ã‘
- ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–æ©Ÿèƒ½

## **Phase 1: å€‹äººã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³è¡¨ç¤ºã®æ”¹å–„**

### **1. ãƒãƒ¼å½¢çŠ¶è¡¨ç¤ºã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…**

**å®Ÿè£…è¦ä»¶ï¼š**
- 8:00-17:00ã®æ™‚é–“è»¸ä¸Šã«æ¥­å‹™ã‚’é€£ç¶šã—ãŸãƒãƒ¼ã¨ã—ã¦è¡¨ç¤º
- ãƒãƒ¼ã®ä½ç½®ã¨å¹…ã¯é–‹å§‹ãƒ»çµ‚äº†æ™‚é–“ã«åŸºã¥ã„ã¦æ­£ç¢ºã«è¨ˆç®—
- æ™‚é–“é‡è¤‡æ™‚ã¯è‡ªå‹•çš„ã«æ®µï¼ˆãƒ¬ãƒ¼ãƒ³ï¼‰ã‚’å¢—ã‚„ã—ã¦è¡¨ç¤º
- å„ãƒãƒ¼å†…ã«æ¥­å‹™åã‚’è¡¨ç¤º

```javascript
// ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³è¨­å®š
const TIMELINE_CONFIG = {
  startHour: 8,     // 8:00
  endHour: 17,      // 17:00
  totalHours: 9,    // 9æ™‚é–“
  laneHeight: 30,   // å„æ®µã®é«˜ã•ï¼ˆpxï¼‰
  barHeight: 26,    // ãƒãƒ¼ã®é«˜ã•ï¼ˆpxï¼‰
  padding: 4        // ä½™ç™½
};

// æ™‚é–“æ–‡å­—åˆ—ã‚’åˆ†ã«å¤‰æ›
function timeToMinutes(timeStr) {
  const [hours, minutes] = timeStr.split(':').map(Number);
  return hours * 60 + minutes;
}

// æ™‚é–“ã‚’ãƒ‘ãƒ¼ã‚»ãƒ³ãƒ†ãƒ¼ã‚¸ã«å¤‰æ›ï¼ˆ8:00-17:00åŸºæº–ï¼‰
function timeToPercent(timeStr) {
  const minutes = timeToMinutes(timeStr);
  const startMinutes = TIMELINE_CONFIG.startHour * 60;
  const totalMinutes = TIMELINE_CONFIG.totalHours * 60;
  return ((minutes - startMinutes) / totalMinutes) * 100;
}

// ã‚¹ã‚¿ãƒƒãƒ•ã®1æ—¥ã®æ¥­å‹™ãƒãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆ
function buildStaffDayBars(staffId, day) {
  const dayAssignments = hospitalStore.assignments[day] || {};
  const businessItems = [];
  
  // é…ç½®ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰æ¥­å‹™ã‚¢ã‚¤ãƒ†ãƒ ã‚’æŠ½å‡º
  Object.entries(dayAssignments).forEach(([businessId, assignedStaffIds]) => {
    if (assignedStaffIds.includes(staffId)) {
      const business = (hospitalStore.dailyBusinesses[day] || []).find(b => b.id === businessId);
      if (business) {
        const startMinutes = timeToMinutes(business.startTime);
        const endMinutes = timeToMinutes(business.endTime);
        
        // è¡¨ç¤ºç¯„å›²å†…ã®æ¥­å‹™ã®ã¿å‡¦ç†
        if (endMinutes > TIMELINE_CONFIG.startHour * 60 && 
            startMinutes < TIMELINE_CONFIG.endHour * 60) {
          businessItems.push({
            businessId,
            title: business.title,
            category: business.category,
            startTime: business.startTime,
            endTime: business.endTime,
            startMinutes,
            endMinutes
          });
        }
      }
    }
  });
  
  // é–‹å§‹æ™‚é–“ã§ã‚½ãƒ¼ãƒˆ
  businessItems.sort((a, b) => a.startMinutes - b.startMinutes);
  
  // ãƒ¬ãƒ¼ãƒ³å‰²å½“ï¼ˆé‡è¤‡è§£æ±ºã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ï¼‰
  const lanes = []; // å„ãƒ¬ãƒ¼ãƒ³ã®æœ€å¾Œã®çµ‚äº†æ™‚é–“
  businessItems.forEach(item => {
    let assignedLane = -1;
    
    // ç©ºã„ã¦ã„ã‚‹ãƒ¬ãƒ¼ãƒ³ã‚’æ¢ã™
    for (let i = 0; i < lanes.length; i++) {
      if (item.startMinutes >= lanes[i]) {
        assignedLane = i;
        lanes[i] = item.endMinutes;
        break;
      }
    }
    
    // ç©ºããŒãªã‘ã‚Œã°æ–°ãƒ¬ãƒ¼ãƒ³ä½œæˆ
    if (assignedLane === -1) {
      assignedLane = lanes.length;
      lanes.push(item.endMinutes);
    }
    
    item.lane = assignedLane;
  });
  
  return {
    items: businessItems,
    maxLanes: lanes.length
  };
}

// ã‚¹ã‚¿ãƒƒãƒ•ã®1æ—¥ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³æç”»
function renderStaffDayTimeline(staffId, day) {
  const { items, maxLanes } = buildStaffDayBars(staffId, day);
  const cellHeight = Math.max(60, maxLanes * TIMELINE_CONFIG.laneHeight + TIMELINE_CONFIG.padding * 2);
  
  const barsHTML = items.map(item => {
    const leftPercent = timeToPercent(item.startTime);
    const rightPercent = timeToPercent(item.endTime);
    const widthPercent = rightPercent - leftPercent;
    const topPosition = TIMELINE_CONFIG.padding + (item.lane * TIMELINE_CONFIG.laneHeight);
    
    const backgroundColor = hospitalStore.colorMap[item.category] || '#6c757d';
    const textColor = getReadableTextColor(backgroundColor);
    
    return `
      <div class="timeline-business-bar" 
           style="
             position: absolute;
             left: ${leftPercent}%;
             width: ${widthPercent}%;
             top: ${topPosition}px;
             height: ${TIMELINE_CONFIG.barHeight}px;
             background-color: ${backgroundColor};
             color: ${textColor};
             border-radius: 4px;
             padding: 2px 6px;
             font-size: 0.75em;
             font-weight: bold;
             display: flex;
             align-items: center;
             justify-content: center;
             box-shadow: 0 2px 4px rgba(0,0,0,0.15);
             cursor: pointer;
             overflow: hidden;
             white-space: nowrap;
             text-overflow: ellipsis;
           "
           title="${item.title} (${item.startTime}-${item.endTime})"
           onclick="editBusinessFromTimeline('${item.businessId}', '${day}')">
        ${item.title}
      </div>
    `;
  }).join('');
  
  // çŠ¶æ…‹ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ï¼ˆéç•ªãƒ»ä¼‘æš‡ç­‰ï¼‰
  const status = getStaffDayStatus(staffId, day);
  const statusOverlay = (status && status !== 'available') ? `
    <div class="status-overlay status-${status}"
         style="
           position: absolute;
           top: 0; left: 0; right: 0; bottom: 0;
           background: ${getStatusOverlayStyle(status)};
           display: flex;
           align-items: center;
           justify-content: center;
           font-weight: bold;
           color: white;
           z-index: 10;
         ">
      ${getStatusDisplayName(status)}
    </div>
  ` : '';
  
  return `
    <div class="day-timeline-cell" 
         style="
           position: relative;
           height: ${cellHeight}px;
           border-right: 2px solid #dee2e6;
           background: ${day === 'Tue' || day === 'Thu' ? '#fafbfc' : 'white'};
           overflow: hidden;
         ">
      ${barsHTML}
      ${statusOverlay}
    </div>
  `;
}

// é€±é–“ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³å…¨ä½“ã®å†æç”»
function renderWeeklyPersonalTimelineWithBars() {
  const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri'];
  
  return `
    <div class="weekly-personal-timeline">
      <div class="timeline-header">
        <h3>ğŸ‘¤ å€‹äººåˆ¥é€±é–“ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ (8:00-17:00)</h3>
        <div class="timeline-controls">
          <button onclick="exportWeeklyTimelinePDF()" class="btn btn-primary">
            ğŸ“„ é€±é–“PDFå‡ºåŠ›
          </button>
          <button onclick="toggleTimelineView()" class="btn btn-secondary">
            ğŸ”„ è¡¨ç¤ºåˆ‡æ›¿
          </button>
        </div>
      </div>
      
      <!-- æ™‚é–“è»¸ãƒ˜ãƒƒãƒ€ãƒ¼ -->
      <div class="timeline-time-header">
        <div class="staff-column-header">ã‚¹ã‚¿ãƒƒãƒ•</div>
        ${days.map(day => `
          <div class="day-column-header">
            <div class="day-info">
              <div class="day-name">${getDayDisplayName(day)}</div>
              <div class="day-date">${getDayDate(day)}</div>
            </div>
            <div class="time-scale">
              ${Array.from({length: 10}, (_, i) => `
                <div class="time-mark" style="left: ${(i / 9) * 100}%;">
                  ${(8 + i).toString().padStart(2, '0')}:00
                </div>
              `).join('')}
            </div>
          </div>
        `).join('')}
      </div>
      
      <!-- ã‚¹ã‚¿ãƒƒãƒ•ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³æœ¬ä½“ -->
      <div class="timeline-body">
        ${hospitalStore.staff.map(staff => `
          <div class="staff-timeline-row">
            <div class="staff-info-cell">
              <div class="staff-avatar" style="background-color: ${staff.color};">
                ${staff.name.charAt(0)}
              </div>
              <div class="staff-details">
                <div class="staff-name">${staff.name}</div>
                <div class="staff-category">${staff.baseCategory}</div>
              </div>
            </div>
            ${days.map(day => renderStaffDayTimeline(staff.id, day)).join('')}
          </div>
        `).join('')}
      </div>
    </div>
  `;
}
```

### **2. ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³å°‚ç”¨CSS**

```css
/* é€±é–“ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ï¼ˆãƒãƒ¼è¡¨ç¤ºå¯¾å¿œï¼‰ */
.timeline-time-header {
  display: grid;
  grid-template-columns: 200px repeat(5, 1fr);
  background: #f8f9fa;
  border-bottom: 3px solid #dee2e6;
  position: sticky;
  top: 0;
  z-index: 100;
}

.staff-column-header {
  padding: 15px;
  font-weight: bold;
  text-align: center;
  border-right: 2px solid #dee2e6;
  background: #e9ecef;
}

.day-column-header {
  border-right: 2px solid #dee2e6;
  background: white;
}

.day-info {
  text-align: center;
  padding: 10px;
  background: #007bff;
  color: white;
}

.time-scale {
  position: relative;
  height: 25px;
  background: linear-gradient(to right, #f1f3f4 0%, #f1f3f4 100%);
  border-top: 1px solid #dee2e6;
}

.time-mark {
  position: absolute;
  top: 2px;
  font-size: 0.7em;
  color: #495057;
  transform: translateX(-50%);
  background: rgba(255, 255, 255, 0.8);
  padding: 1px 3px;
  border-radius: 2px;
}

.staff-timeline-row {
  display: grid;
  grid-template-columns: 200px repeat(5, 1fr);
  border-bottom: 1px solid #dee2e6;
}

.staff-info-cell {
  padding: 15px;
  border-right: 2px solid #dee2e6;
  display: flex;
  align-items: center;
  gap: 12px;
  background: #f8f9fa;
}

.staff-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: bold;
  font-size: 1.2em;
}

/* æ¥­å‹™ãƒãƒ¼ã®ãƒ›ãƒãƒ¼åŠ¹æœ */
.timeline-business-bar:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 8px rgba(0,0,0,0.25) !important;
  z-index: 20;
}

/* çŠ¶æ…‹ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã‚¹ã‚¿ã‚¤ãƒ« */
.status-overlay.status-offDuty {
  background: repeating-linear-gradient(
    45deg,
    rgba(108, 117, 125, 0.8),
    rgba(108, 117, 125, 0.8) 10px,
    rgba(90, 98, 104, 0.8) 10px,
    rgba(90, 98, 104, 0.8) 20px
  ) !important;
}

.status-overlay.status-annualLeave {
  background: repeating-linear-gradient(
    45deg,
    rgba(40, 167, 69, 0.8),
    rgba(40, 167, 69, 0.8) 10px,
    rgba(30, 126, 52, 0.8) 10px,
    rgba(30, 126, 52, 0.8) 20px
  ) !important;
}
```

## **Phase 2: é€±é–“PDFå‡ºåŠ›æ©Ÿèƒ½ã®å®Ÿè£…**

### **PDFå‡ºåŠ›ã‚·ã‚¹ãƒ†ãƒ ï¼ˆhtml2canvas + jsPDFï¼‰**

```javascript
// é€±é–“ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³PDFå‡ºåŠ›
async function exportWeeklyTimelinePDF() {
  const timelineContainer = document.querySelector('.weekly-personal-timeline');
  if (!timelineContainer) {
    showMessage('ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“', 'error');
    return;
  }

  // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
  showMessage('PDFã‚’ç”Ÿæˆä¸­...', 'info');
  
  try {
    // é«˜è§£åƒåº¦ã§ã‚­ãƒ£ãƒ—ãƒãƒ£
    const canvas = await html2canvas(timelineContainer, {
      scale: 2,
      useCORS: true,
      logging: false,
      scrollX: 0,
      scrollY: -window.scrollY,
      backgroundColor: '#ffffff',
      width: timelineContainer.scrollWidth,
      height: timelineContainer.scrollHeight
    });

    const imgData = canvas.toDataURL('image/png');
    
    // A3æ¨ªå‘ãPDFè¨­å®š
    const { jsPDF } = window.jspdf;
    const pdf = new jsPDF('landscape', 'mm', 'a3');
    
    const pageWidth = pdf.internal.pageSize.getWidth();
    const pageHeight = pdf.internal.pageSize.getHeight();
    
    // ç”»åƒã‚µã‚¤ã‚ºè¨ˆç®—
    const imgWidth = pageWidth - 20; // ä½™ç™½10mmÃ—2
    const imgHeight = (canvas.height * imgWidth) / canvas.width;
    
    // ã‚¿ã‚¤ãƒˆãƒ«è¿½åŠ 
    pdf.setFontSize(16);
    pdf.setFont('helvetica', 'bold');
    const weekStart = getWeekStartDate();
    const weekEnd = getWeekEndDate();
    const title = `æ¥­å‹™é…ç½®èª¿æ•´ã‚·ã‚¹ãƒ†ãƒ  - é€±é–“ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ (${formatDate(weekStart)} ï½ ${formatDate(weekEnd)})`;
    pdf.text(title, pageWidth / 2, 15, { align: 'center' });
    
    // ç”»åƒã‚’è¿½åŠ ï¼ˆè¤‡æ•°ãƒšãƒ¼ã‚¸å¯¾å¿œï¼‰
    let remainingHeight = imgHeight;
    let sourceY = 0;
    let pageNum = 1;
    
    while (remainingHeight > 0) {
      const availableHeight = pageHeight - 30; // ãƒ˜ãƒƒãƒ€ãƒ¼ãƒ»ãƒ•ãƒƒã‚¿ãƒ¼ç”¨ä½™ç™½
      const sliceHeight = Math.min(remainingHeight, availableHeight);
      
      if (pageNum > 1) {
        pdf.addPage();
        pdf.setFontSize(16);
        pdf.setFont('helvetica', 'bold');
        pdf.text(title, pageWidth / 2, 15, { align: 'center' });
      }
      
      // ç”»åƒã®ä¸€éƒ¨ã‚’åˆ‡ã‚Šå–ã£ã¦é…ç½®
      const tempCanvas = document.createElement('canvas');
      const tempCtx = tempCanvas.getContext('2d');
      tempCanvas.width = canvas.width;
      tempCanvas.height = (sliceHeight / imgHeight) * canvas.height;
      
      tempCtx.drawImage(
        canvas,
        0, (sourceY / imgHeight) * canvas.height,
        canvas.width, tempCanvas.height,
        0, 0,
        canvas.width, tempCanvas.height
      );
      
      const sliceData = tempCanvas.toDataURL('image/png');
      pdf.addImage(sliceData, 'PNG', 10, 20, imgWidth, sliceHeight);
      
      // ãƒ•ãƒƒã‚¿ãƒ¼è¿½åŠ 
      pdf.setFontSize(8);
      pdf.setFont('helvetica', 'normal');
      pdf.setTextColor(100, 100, 100);
      pdf.text(`å‡ºåŠ›æ—¥æ™‚: ${new Date().toLocaleString('ja-JP')}`, 10, pageHeight - 5);
      pdf.text(`ãƒšãƒ¼ã‚¸: ${pageNum}`, pageWidth - 30, pageHeight - 5);
      
      remainingHeight -= sliceHeight;
      sourceY += sliceHeight;
      pageNum++;
    }
    
    // ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜
    const fileName = `æ¥­å‹™é…ç½®_é€±é–“ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³_${formatDate(weekStart)}_${formatDate(weekEnd)}.pdf`;
    pdf.save(fileName);
    
    showMessage('é€±é–“ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³PDFã‚’å‡ºåŠ›ã—ã¾ã—ãŸ', 'success');
    
  } catch (error) {
    console.error('PDFå‡ºåŠ›ã‚¨ãƒ©ãƒ¼:', error);
    showMessage('PDFå‡ºåŠ›ã«å¤±æ•—ã—ã¾ã—ãŸ', 'error');
  }
}

// æ—¥ä»˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆé–¢æ•°
function formatDate(date) {
  return date.toLocaleDateString('ja-JP', {
    year: 'numeric',
    month: '2-digit',
    day: '2-digit'
  }).replace(/\//g, '-');
}

// é€±ã®é–‹å§‹ãƒ»çµ‚äº†æ—¥å–å¾—
function getWeekStartDate() {
  // ç¾åœ¨é¸æŠã•ã‚Œã¦ã„ã‚‹é€±ã®é–‹å§‹æ—¥ã‚’è¿”ã™
  // hospitalStore.currentWeek ã‹ã‚‰è¨ˆç®—
  return new Date(); // å®Ÿè£…ã«å¿œã˜ã¦èª¿æ•´
}

function getWeekEndDate() {
  const start = getWeekStartDate();
  const end = new Date(start);
  end.setDate(start.getDate() + 4); // é‡‘æ›œæ—¥ã¾ã§
  return end;
}
```

## **å—ã‘å…¥ã‚ŒåŸºæº–ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**

### **Phase 1ï¼ˆã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³è¡¨ç¤ºæ”¹å–„ï¼‰**
- [ ] **æ¥­å‹™é…ç½®ãŒæ™‚é–“åŒºåˆ‡ã‚Šã‚»ãƒ«ã§ã¯ãªããƒãƒ¼å½¢çŠ¶ã§è¡¨ç¤ºã•ã‚Œã‚‹**
- [ ] **ãƒãƒ¼ã®ä½ç½®ã¨å¹…ãŒé–‹å§‹ãƒ»çµ‚äº†æ™‚é–“ã«åŸºã¥ã„ã¦æ­£ç¢ºã«è¨ˆç®—ã•ã‚Œã‚‹**
- [ ] **æ™‚é–“ãŒé‡ãªã‚‹æ¥­å‹™ãŒç•°ãªã‚‹æ®µï¼ˆãƒ¬ãƒ¼ãƒ³ï¼‰ã«è‡ªå‹•é…ç½®ã•ã‚Œã‚‹**
- [ ] **å„ãƒãƒ¼å†…ã«æ¥­å‹™åãŒè¡¨ç¤ºã•ã‚Œã‚‹**
- [ ] **æ¥­å‹™åŒºåˆ†ã«å¿œã˜ãŸè‰²åˆ†ã‘ãŒãƒãƒ¼ã«é©ç”¨ã•ã‚Œã‚‹**
- [ ] **éç•ªãƒ»ä¼‘æš‡ãƒ»å‡ºå¼µã®çŠ¶æ…‹ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ãŒè¡¨ç¤ºã•ã‚Œã‚‹**
- [ ] **8:00-17:00ã®æ™‚é–“è»¸ãŒæ­£ç¢ºã«è¡¨ç¤ºã•ã‚Œã‚‹**

### **Phase 2ï¼ˆPDFå‡ºåŠ›æ”¹å–„ï¼‰**
- [ ] **ã€ŒğŸ“„ é€±é–“PDFå‡ºåŠ›ã€ãƒœã‚¿ãƒ³ãŒæ©Ÿèƒ½ã™ã‚‹**
- [ ] **PDFå‡ºåŠ›ã§æœˆã€œé‡‘ã®å…¨5æ—¥é–“ãŒä¸€æ‹¬å‡ºåŠ›ã•ã‚Œã‚‹**
- [ ] **A3æ¨ªå‘ãã§é©åˆ‡ãªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã§å‡ºåŠ›ã•ã‚Œã‚‹**
- [ ] **æ¥­å‹™é…ç½®ãƒãƒ¼ãŒè‰²åˆ†ã‘ã•ã‚Œã¦å‡ºåŠ›ã•ã‚Œã‚‹**
- [ ] **è¤‡æ•°ãƒšãƒ¼ã‚¸å¯¾å¿œï¼ˆå†…å®¹ãŒ1ãƒšãƒ¼ã‚¸ã«åã¾ã‚‰ãªã„å ´åˆï¼‰**
- [ ] **ãƒ˜ãƒƒãƒ€ãƒ¼ãƒ»ãƒ•ãƒƒã‚¿ãƒ¼ãŒé©åˆ‡ã«è¨­å®šã•ã‚Œã‚‹**

### **æ—¢å­˜æ©Ÿèƒ½ç¶­æŒç¢ºèª**
- [ ] **27åã®æ­£ç¢ºãªã‚¹ã‚¿ãƒƒãƒ•ãƒ‡ãƒ¼ã‚¿ãŒç¶­æŒã•ã‚Œã‚‹**
- [ ] **ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç”»é¢ã®å…¨æ©Ÿèƒ½ãŒæ­£å¸¸å‹•ä½œã™ã‚‹**
- [ ] **æ¥­å‹™è¿½åŠ ãƒ»ç·¨é›†ãƒ»å‰Šé™¤ãŒæ­£å¸¸å‹•ä½œã™ã‚‹**
- [ ] **ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—é…ç½®ãŒæ­£å¸¸å‹•ä½œã™ã‚‹**
- [ ] **å½“ç›´ãƒ»éç•ªè¨­å®šãŒæ­£å¸¸å‹•ä½œã™ã‚‹**
- [ ] **HDåŒºåˆ†ãƒ”ãƒ³ã‚¯ãƒ»FLEXåŒºåˆ†ã‚´ãƒ¼ãƒ«ãƒ‰ãŒç¶­æŒã•ã‚Œã‚‹**

## **å®Ÿè£…æŒ‡ç¤º**

### **å®Ÿè£…é †åºï¼ˆå³å®ˆï¼‰**
1. **Phase 1ã®ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³è¡¨ç¤ºæ”¹å–„ã‚’æœ€å„ªå…ˆã§å®Ÿè£…**
   - æ—¢å­˜ã®`renderWeeklyPersonalTimeline`é–¢æ•°ã‚’`renderWeeklyPersonalTimelineWithBars`ã«ç½®æ›
   - ãƒãƒ¼æç”»ãƒ­ã‚¸ãƒƒã‚¯ã¨ãƒ¬ãƒ¼ãƒ³åˆ†ã‘ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’å®Ÿè£…
   - CSSæ›´æ–°
2. **å‹•ä½œç¢ºèªå¾Œã€Phase 2ã®PDFå‡ºåŠ›æ©Ÿèƒ½ã‚’å®Ÿè£…**
   - `html2canvas`ã¨`jsPDF`ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ç¢ºå®Ÿãªèª­ã¿è¾¼ã¿
   - é€±é–“ä¸€æ‹¬å‡ºåŠ›æ©Ÿèƒ½ã®å®Ÿè£…
3. **å…¨ä½“çµ±åˆãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½**

### **é‡è¦ãªæ³¨æ„ç‚¹**
- **æ—¢å­˜ã®å„ªç§€ãªæ©Ÿèƒ½ã¯çµ¶å¯¾ã«ç ´å£Šã—ãªã„**
- **ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³æ›´æ–°æ™‚ã¯å¿…ãš`renderWeeklyPersonalTimelineWithBars()`ã‚’å‘¼ã³å‡ºã™**
- **æ¥­å‹™ç·¨é›†ãƒ»é…ç½®å¤‰æ›´å¾Œã®ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³å†æç”»ã‚’ç¢ºå®Ÿã«å®Ÿè¡Œ**
- **PDFå‡ºåŠ›æ™‚ã®ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã«æ³¨æ„**

ã“ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«å¾“ã„ã€å€‹äººã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³è¡¨ç¤ºã®æ”¹å–„ã¨PDFå‡ºåŠ›æ©Ÿèƒ½ã®ä¿®æ­£ã‚’è¡Œã„ã€çœŸã®å®Œæˆç‰ˆã€Œæ¥­å‹™é…ç½®èª¿æ•´ã‚·ã‚¹ãƒ†ãƒ ã€ã‚’æ§‹ç¯‰ã—ã¦ãã ã•ã„ã€‚
